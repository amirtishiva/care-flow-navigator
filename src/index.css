@tailwind base;
@tailwind components;
@tailwind utilities;

/* MedTriage AI - Clinical Design System
   Clean, accessible dark theme for ED environments
   State-driven emergency visual system
*/

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap');

@layer base {
  :root {
    /* Dark Clinical Base - Refined slate palette */
    --background: 222 20% 9%;
    --foreground: 210 20% 95%;

    --card: 222 18% 12%;
    --card-foreground: 210 20% 95%;

    --popover: 222 18% 12%;
    --popover-foreground: 210 20% 95%;

    /* Primary - Clinical Cyan */
    --primary: 199 89% 48%;
    --primary-foreground: 222 20% 9%;

    /* Secondary - Muted Slate */
    --secondary: 222 14% 18%;
    --secondary-foreground: 210 15% 80%;

    --muted: 222 14% 16%;
    --muted-foreground: 215 12% 50%;

    --accent: 222 14% 20%;
    --accent-foreground: 199 89% 60%;

    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 100%;

    --border: 222 14% 18%;
    --input: 222 14% 16%;
    --ring: 199 89% 48%;

    --radius: 0.5rem;

    /* ESI Severity Levels - Clean, accessible colors */
    --esi-1: 0 72% 55%;
    --esi-1-bg: 0 50% 12%;
    --esi-1-border: 0 60% 28%;
    
    --esi-2: 25 92% 52%;
    --esi-2-bg: 25 60% 12%;
    --esi-2-border: 25 70% 30%;
    
    --esi-3: 45 90% 48%;
    --esi-3-bg: 45 50% 12%;
    --esi-3-border: 45 60% 28%;
    
    --esi-4: 142 60% 42%;
    --esi-4-bg: 142 40% 10%;
    --esi-4-border: 142 50% 25%;
    
    --esi-5: 199 80% 45%;
    --esi-5-bg: 199 50% 10%;
    --esi-5-border: 199 60% 25%;

    /* Status Colors - Semantic */
    --status-pending: 45 90% 48%;
    --status-active: 199 80% 50%;
    --status-completed: 142 60% 42%;
    --status-escalated: 0 72% 55%;
    --status-overdue: 0 65% 50%;

    /* AI Confidence */
    --confidence-high: 142 60% 42%;
    --confidence-medium: 45 90% 48%;
    --confidence-low: 25 92% 52%;

    /* Sidebar */
    --sidebar-background: 222 22% 7%;
    --sidebar-foreground: 210 15% 80%;
    --sidebar-primary: 199 89% 50%;
    --sidebar-primary-foreground: 222 22% 7%;
    --sidebar-accent: 222 18% 14%;
    --sidebar-accent-foreground: 199 80% 60%;
    --sidebar-border: 222 14% 14%;
    --sidebar-ring: 199 89% 48%;

    /* SBAR Sections */
    --sbar-situation: 199 80% 45%;
    --sbar-background: 262 60% 50%;
    --sbar-assessment: 25 85% 50%;
    --sbar-recommendation: 142 60% 42%;

    /* Vitals Status */
    --vitals-normal: 142 60% 42%;
    --vitals-warning: 45 90% 48%;
    --vitals-critical: 0 72% 55%;

    /* Chart Colors */
    --chart-1: 199 80% 45%;
    --chart-2: 142 60% 42%;
    --chart-3: 45 90% 48%;
    --chart-4: 262 60% 50%;
    --chart-5: 25 85% 50%;

    /* Emergency State - Red dominant */
    --emergency-bg: 0 40% 8%;
    --emergency-card: 0 35% 11%;
    --emergency-border: 0 50% 22%;
    --emergency-accent: 0 65% 45%;
    --emergency-muted: 0 30% 16%;
    --emergency-text: 0 20% 90%;
  }

  /* Light mode */
  .light {
    --background: 210 20% 98%;
    --foreground: 222 20% 10%;

    --card: 0 0% 100%;
    --card-foreground: 222 20% 10%;

    --popover: 0 0% 100%;
    --popover-foreground: 222 20% 10%;

    --primary: 199 80% 40%;
    --primary-foreground: 0 0% 100%;

    --secondary: 210 12% 92%;
    --secondary-foreground: 222 18% 20%;

    --muted: 210 10% 90%;
    --muted-foreground: 215 12% 45%;

    --accent: 210 12% 92%;
    --accent-foreground: 199 80% 35%;

    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 100%;

    --border: 214 18% 85%;
    --input: 214 18% 85%;
    --ring: 199 80% 40%;

    --esi-1-bg: 0 72% 96%;
    --esi-2-bg: 25 92% 96%;
    --esi-3-bg: 45 90% 96%;
    --esi-4-bg: 142 60% 96%;
    --esi-5-bg: 199 80% 96%;

    --sidebar-background: 220 18% 97%;
    --sidebar-foreground: 222 18% 20%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-sans antialiased;
    font-feature-settings: "cv02", "cv03", "cv04", "cv11";
  }

  /* Monospace for clinical data */
  .font-mono {
    font-family: 'JetBrains Mono', ui-monospace, monospace;
    font-variant-numeric: tabular-nums;
  }

  .font-vitals {
    font-family: 'JetBrains Mono', ui-monospace, monospace;
    font-variant-numeric: tabular-nums;
    letter-spacing: -0.01em;
  }
}

@layer components {
  /* ========== ESI Badge System ========== */
  .esi-badge {
    @apply inline-flex items-center justify-center rounded font-semibold transition-colors;
  }
  
  .esi-badge-1 {
    @apply bg-[hsl(var(--esi-1-bg))] text-[hsl(var(--esi-1))] border border-[hsl(var(--esi-1-border))];
  }
  .esi-badge-2 {
    @apply bg-[hsl(var(--esi-2-bg))] text-[hsl(var(--esi-2))] border border-[hsl(var(--esi-2-border))];
  }
  .esi-badge-3 {
    @apply bg-[hsl(var(--esi-3-bg))] text-[hsl(var(--esi-3))] border border-[hsl(var(--esi-3-border))];
  }
  .esi-badge-4 {
    @apply bg-[hsl(var(--esi-4-bg))] text-[hsl(var(--esi-4))] border border-[hsl(var(--esi-4-border))];
  }
  .esi-badge-5 {
    @apply bg-[hsl(var(--esi-5-bg))] text-[hsl(var(--esi-5))] border border-[hsl(var(--esi-5-border))];
  }

  /* ========== Card System ========== */
  .clinical-card {
    @apply bg-card border border-border rounded-lg transition-colors duration-150;
  }
  
  .clinical-card-hover {
    @apply clinical-card hover:border-primary/30;
  }

  .clinical-card-interactive {
    @apply clinical-card-hover cursor-pointer active:scale-[0.998];
  }

  /* ========== Data Display Cards ========== */
  .data-card {
    @apply bg-card border border-border rounded-lg p-4;
  }

  .data-card-highlight {
    @apply data-card border-primary/25 bg-primary/5;
  }

  /* ========== Vitals Cards ========== */
  .vitals-card {
    @apply rounded-lg border p-3 transition-colors duration-150;
  }

  .vitals-normal {
    @apply bg-[hsl(var(--vitals-normal)/0.06)] border-[hsl(var(--vitals-normal)/0.2)] text-[hsl(var(--vitals-normal))];
  }
  
  .vitals-warning {
    @apply bg-[hsl(var(--vitals-warning)/0.06)] border-[hsl(var(--vitals-warning)/0.2)] text-[hsl(var(--vitals-warning))];
  }
  
  .vitals-critical {
    @apply bg-[hsl(var(--vitals-critical)/0.06)] border-[hsl(var(--vitals-critical)/0.2)] text-[hsl(var(--vitals-critical))];
  }

  /* ========== SBAR Sections ========== */
  .sbar-card {
    @apply rounded-lg p-3 bg-muted/30 border border-border/50;
    border-left-width: 3px;
  }
  
  .sbar-situation {
    @apply sbar-card;
    border-left-color: hsl(var(--sbar-situation));
  }
  .sbar-background-section {
    @apply sbar-card;
    border-left-color: hsl(var(--sbar-background));
  }
  .sbar-assessment {
    @apply sbar-card;
    border-left-color: hsl(var(--sbar-assessment));
  }
  .sbar-recommendation {
    @apply sbar-card;
    border-left-color: hsl(var(--sbar-recommendation));
  }

  /* ========== Status Indicators ========== */
  .status-dot {
    @apply w-2 h-2 rounded-full shrink-0;
  }
  
  .status-dot-pulse {
    @apply status-dot animate-pulse;
  }

  .status-dot-critical {
    @apply status-dot bg-[hsl(var(--esi-1))] animate-pulse;
  }

  .status-dot-warning {
    @apply status-dot bg-[hsl(var(--esi-2))];
  }

  .status-dot-stable {
    @apply status-dot bg-[hsl(var(--confidence-high))];
  }

  /* ========== Confidence Bar ========== */
  .confidence-bar {
    @apply h-1.5 rounded-full bg-muted overflow-hidden;
  }
  
  .confidence-fill {
    @apply h-full rounded-full transition-all duration-500 ease-out;
  }

  /* ========== Alert Banners ========== */
  .alert-banner {
    @apply rounded-lg border p-4 flex items-center gap-4;
  }
  
  .alert-banner-critical {
    @apply alert-banner bg-[hsl(var(--esi-1-bg))] border-[hsl(var(--esi-1-border))];
  }
  
  .alert-banner-warning {
    @apply alert-banner bg-[hsl(var(--esi-2-bg))] border-[hsl(var(--esi-2-border))];
  }

  .alert-banner-info {
    @apply alert-banner bg-muted/50 border-border;
  }

  /* ========== Table Rows ========== */
  .table-row-critical {
    @apply bg-[hsl(var(--esi-1-bg)/0.4)];
  }
  
  .table-row-urgent {
    @apply bg-[hsl(var(--esi-2-bg)/0.25)];
  }

  .table-row-hover {
    @apply hover:bg-muted/40 transition-colors cursor-pointer;
  }

  /* ========== Emergency State ========== */
  .emergency-state {
    --background: var(--emergency-bg);
    --card: var(--emergency-card);
    --border: var(--emergency-border);
    --muted: var(--emergency-muted);
  }
  
  .emergency-state .clinical-card {
    @apply border-[hsl(var(--emergency-border))];
  }

  /* ========== Input Fields ========== */
  .input-clinical {
    @apply bg-muted/50 border-border focus:border-primary/50 focus:bg-muted/70 transition-colors;
  }

  .input-vitals {
    @apply font-vitals text-lg h-11 bg-muted/30 border-border;
  }

  .input-vitals-warning {
    @apply input-vitals text-[hsl(var(--esi-2))] border-[hsl(var(--esi-2)/0.4)];
  }

  .input-vitals-critical {
    @apply input-vitals text-[hsl(var(--esi-1))] border-[hsl(var(--esi-1)/0.4)];
  }

  /* ========== Section Headers ========== */
  .section-label {
    @apply text-[10px] uppercase tracking-wider font-semibold text-muted-foreground;
  }

  .section-title {
    @apply text-sm font-semibold flex items-center gap-2;
  }

  /* ========== Animations ========== */
  .pulse-critical {
    animation: pulseCritical 2s ease-in-out infinite;
  }

  @keyframes pulseCritical {
    0%, 100% {
      box-shadow: 0 0 0 0 hsl(var(--esi-1) / 0.3);
    }
    50% {
      box-shadow: 0 0 0 6px hsl(var(--esi-1) / 0);
    }
  }

  .transition-theme {
    @apply transition-colors duration-200 ease-in-out;
  }

  /* ========== Timer Display ========== */
  .timer-display {
    @apply font-vitals text-3xl font-bold tracking-tight;
  }
  
  .timer-critical {
    @apply timer-display text-[hsl(var(--esi-1))];
  }

  /* ========== Scrollbar ========== */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  
  ::-webkit-scrollbar-track {
    @apply bg-transparent;
  }
  
  ::-webkit-scrollbar-thumb {
    @apply bg-muted-foreground/15 rounded-full;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    @apply bg-muted-foreground/25;
  }

  /* ========== Focus States ========== */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-primary/40 focus:ring-offset-2 focus:ring-offset-background;
  }

  /* ========== Stat Cards ========== */
  .stat-card {
    @apply clinical-card p-4 border-t-2;
  }

  .stat-card-default {
    @apply stat-card border-t-primary/40;
  }

  .stat-card-warning {
    @apply stat-card border-t-[hsl(var(--esi-2))];
  }

  .stat-card-critical {
    @apply stat-card border-t-[hsl(var(--esi-1))];
  }

  .stat-card-success {
    @apply stat-card border-t-[hsl(var(--confidence-high))];
  }

  /* ========== Escalation Cards ========== */
  .escalation-card {
    @apply rounded-lg border p-3 space-y-2;
  }

  .escalation-critical {
    @apply escalation-card bg-[hsl(var(--esi-1-bg))] border-[hsl(var(--esi-1-border)/0.5)];
  }

  .escalation-warning {
    @apply escalation-card bg-[hsl(var(--esi-2-bg))] border-[hsl(var(--esi-2-border)/0.5)];
  }

  .escalation-info {
    @apply escalation-card bg-muted/40 border-border;
  }
}
